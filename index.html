<!DOCTYPE html>
<html>
  <head>
    <title>Marker Animations With setTimeout()</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCMp-BmFU6ImQLQp798O8uu9cx7Zd69xTg&callback=initMap&libraries=&v=weekly"
      defer
    ></script>
    <style type="text/css">
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }

      /* Optional: Makes the sample page fill the window. */
      html,
      body {
        height: 100%;
        margin: 0;
        padding: 0;
      }

      #floating-panel {
        position: absolute;
        top: 10px;
        left: 25%;
        z-index: 5;
        background-color: #fff;
        padding: 5px;
        border: 1px solid #999;
        text-align: center;
        font-family: "Roboto", "sans-serif";
        line-height: 30px;
        padding-left: 10px;
      }

      #floating-panel {
        margin-left: -52px;
      }
    </style>
    <script>
      "use strict";

      // If you're adding a number of markers, you may want to drop them on the map
      // consecutively rather than all at once. This example shows how to use
      // window.setTimeout() to space your markers' animation.
      const neighborhoods = [
        {//1  MARY STREET
          lat: 53.348,
          lng: -6.260
        },
        {//2  CARLOW
          lat: 52.835,
          lng: -6.927
        },
        {//3  DUN LAOGHAIRE
          lat: 53.299,
          lng: -6.182
        },
        {//4  NAVAN
          lat: 53.654,
          lng: -6.688
        },
        {//5  MULLINGAR
          lat: 52.337,
          lng: -6.461
        },
        {//6  WEXFORD
          lat: 53.525,
          lng: -7.350
        },
        {//7  PORTLAOISE
          lat: 53.031,
          lng: -7.297   
        },
        {//8  NUTGROVE
          lat: 53.290,
          lng: -6.268
        },
        {//9  ENNIS
          lat: 53.299,
          lng: -6.182
        },
        {//10  LIMERICK-DOORADOYLE
          lat: 52.853,
          lng: -8.984
        },
        {//11  SLIGO
          lat: 54.271,
          lng: -8.476
        },
        {//12  LETTERKENNY
          lat: 54.946,
          lng: -7.705
        },
        {//13  GALWAY - HEADFORD RD
          lat: 53.277,
          lng: -9.051   
        },
        {//14  KILKENNY
          lat: 52.653,
          lng: -7.254
        },
        {//15  LIMERICK-OCONNELL ST
          lat: 52.664,
          lng: -8.627
        },
        {//16  SANTRY
          lat: 53.392,
          lng: -6.248
        },
        {//17  ARTANE
          lat: 53.383,
          lng: -6.215
        },
        {//18  DROGHEDA
          lat: 53.715,
          lng: -6.351
        },
        {//19  NEWBRIDGE
          lat: 52.933,
          lng: -6.710   
        },
        {//20  WATERFORD
          lat: 52.261,
          lng: -7.112  
        },
        {//21  GALWAY - EYRE SQ
            lat: 53.275,
            lng: -9.051
        },
        {//22  TRALEE
          lat: 52.954,
          lng: -7.798
        },
        {//23  LONGFORD
          lat: 53.729,
          lng: -7.799
        },
        {//24  CASTLEBAR
          lat: 54.273,
          lng: -8.478
        },
        {//25  CORK - PATRICK ST
          lat: 51.899,
          lng: -8.471
        },
        {//26  O'CONNELL STREET
          lat: 53.349,
          lng: -6.260   
        },
        {//27  CLONMEL
          lat: 52.353,
          lng: -7.703  
        },
        {//28  ATHLONE
          lat: 53.420,
          lng: -7.934
        },
        {//29  BLANCHARDSTOWN
          lat: 53.393,
          lng: -6.390
        },
        {//30  SWORDS
          lat: 53.471,
          lng: -6.230
        },
        {//31  DUNDRUM
          lat: 53.287,
          lng: -6.242
        },
        {//32  DUNDALK MARSHES
          lat: 54.001,
          lng: -6.399
        },
        {//33  BALLINA
          lat: 54.114,
          lng: -9.154   
        },
        {//34  CORK - WILTON
          lat: 51.881,
          lng: -8.508
        },
        {//35  KILLARNEY
          lat: 52.060,
          lng: -9.510
        },
        {//36  LIFFEY VALLEY
          lat: 53.353,
          lng: -6.391
        },
        {//1  BOSTON - DTX
          lat: 42.355,
          lng: -71.060
        },
        {//2  BURLINGTON
          lat: 42.483,
          lng: -71.214
        },
        {//3  KING OF PRUSSIA
          lat: 40.087,
          lng: -75.394
        },
        {//4  DANBURY
          lat: 41.381,
          lng: -73.480
        },
        {//5  FREEHOLD
          lat: 40.254,
          lng: -74.300
        },
        {//6  BRAINTREE
          lat: 42.222,
          lng: -71.024
        },
        {//7  WILLOW GROVE
          lat: 40.140,
          lng: -75.124
        },
        {//8  STATEN ISLAND
          lat: 40.582,
          lng: -74.166
        },
        {//9  AMERICAN DREAM OPENING SOON
          lat: 40.822,
          lng: -74.088
        },
        {//10  BROOKLYN
          lat: 40.610,
          lng: -73.922
        },
        {//11  SAWGRASS MILLS OPENING SOON
          lat: 26.151,
          lng: -80.322
        },
        {//12 CHICAGO OPENING SOON
          lat: 41.883,
          lng: -87.627
        },
        {//1  MARSEILLE LITTORAL
          lat: 43.364,
          lng: 5.350
        },
        {//2  DIJON-TOISON D'OR
          lat: 47.356,
          lng: 5.046
        },
        {//3  TOULOUSE
          lat: 43.608,
          lng: 1.445
        },
        {//4  LYON
          lat: 45.762,
          lng: 4.857
        },
        {//5  CAGNES-SUR-MER
          lat: 43.665,
          lng: 7.127
        },
        {//6  LA VALETTE DU VAR
          lat: 43.137,
          lng: 6.004
        },
        {//7  BORDEAUX
          lat: 44.879,
          lng: -0.569
        },
        {//8  PARIS - O'PARINOR
          lat: 48.957,
          lng: 2.475
        },
        {//9  PARIS - VILLENEUVE
          lat: 48.923,
          lng: 2.328
        },
        {//10  PARIS - CRETEIL
          lat: 48.779,
          lng: 2.455
        },
        {//11  PARIS VAL D'EUROPE
          lat: 48.855,
          lng: 2.780
        },
        {//12  METZ
          lat: 49.107,
          lng: 6.183
        },
        {//13  PARIS - EVRY2
          lat: 48.630,
          lng: 2.427
        },
        {//14  LILLE
          lat: 50.637,
          lng: 3.074
        },
        {//15  STRASBOURG OPENING SOON
          lat: 48.586,
          lng: 7.745
        },
        {//16  LE HAVRE
          lat: 49.493,
          lng: 0.107
        },
        {//17  PARIS - PLAISIR OPENING SOON
          lat: 48.883,
          lng: 2.134
        },
        {//18  LENS - NOYELLES
          lat: 50.413,
          lng: 2.977
        },
        {//19  PARIS-BELLE EPINE
          lat: 48.757,
          lng: 2.371
        },
        {//20  ARESE - IL CENTRO
          lat: 45.563,
          lng: 9.053
        },
        {//21  FLORENCE
          lat: 43.842,
          lng: 11.141
        },
        {//22  BRESCIA
          lat: 45.559,
          lng: 9.995
        },
        {//23  VERONA
          lat: 45.406,
          lng: 10.977
        },
        {//24  MILAN FIORDALISO
          lat: 45.393,
          lng: 9.176
        },
        {//25  ROMA - MAXIMO OPENING SOON
          lat: 41.821,
          lng: 12.483
        },
        {//1  MADRID-XANADU
          lat: 40.299,
          lng: -3.926
        },
        {//2  JEREZ
          lat: 36.691629,
          lng: -6.155875
        },
        {//3  OVIEDO - BUENAVISTA
          lat: 43.390882,
          lng: -5.79996
        },
        {//4  MADRID-P.CORREDOR
          lat: 40.477299,
          lng: -3.480388
        },
        {//5  BILBAO - BALLONTI
          lat: 43.311526,
          lng: -3.022047
        },
        {//6  MADRID-ISLAZUL
          lat: 40.364816,
          lng: -3.737234
        },
        {//7  OVIEDO P.PRINCIPADO
          lat: 43.390874,
          lng: -5.800186
        },
        {//8  MADRID-LA GAVIA
          lat: 40.368002,
          lng: -3.597208
        },
        {//9  ALGECIRAS
          lat: 36.134788,
          lng: -5.463226
        },
        {//10  BARCA - DIAGONAL MAR
          lat: 41.40995,
          lng: 2.216657
        },
        {//11  BARCA - CORNELLA
          lat: 41.40995,
          lng: 2.216657
        },
        {//12  ORIHUELA LA ZENIA
          lat: 37.931807,
          lng: -0.737569
        },
        {//13  BADAJOZ
          lat: 38.881806,
          lng: -7.007992
        },
        {//14  MADRID-MAJADAHONDA
          lat: 40.492758,
          lng: -3.900026
        },
        {//15  LA CORUNA -MARINEDA
          lat: 43.346839,
          lng: -8.425166
        },
        {//16  ELCHE
          lat: 38.263163,
          lng: -0.719327
        },
        {//17  ZARAGOZA P.VENECIA
          lat: 41.608816,
          lng: -0.884751
        },
        {//18  CASTELLON
          lat: 39.979488,
          lng: -0.063236
        },
        {//19  SANTIAGO AS CANCELAS
          lat: 42.889116,
          lng: -8.526174
        },
        {//20  VALLADOLID RIO
          lat: 41.629157,
          lng: -4.783847
        },
        {//21  MALAGA - LARIOS
          lat: 36.715573,
          lng: -4.433645
        },
        {//22  MADRID-PARQUE SUR
          lat: 40.339853,
          lng: -3.730678
        },
        {//23  ALICANTE - GRAN VIA
          lat: 38.367083,
          lng: -0.469016
        },
        {//24  CORDOBA -EL ARCANGEL
          lat: 37.878296,
          lng: -4.765759
        },
        {//25  BARCA - L'ILLA
          lat: 41.409666,
          lng: 2.216265
        },
        {//26  PAMPLONA LA MOREA
          lat: 42.783895,
          lng: -1.632658
        },
        {//27  VALENCIA BONAIRE
          lat: 39.472056,
          lng: -0.488964
        },
        {//28  HUELVA (HOLEA)
          lat: 37.271769,
          lng: -6.919976
        },
        {//29  CARTAGENA (ESP MED)
          lat: 37.625984,
          lng: -0.948611
        },
        {//30  SANTANDER VALLE REAL
          lat: 43.427897,
          lng: -3.837567
        },
        {//31  VITORIA
          lat: 42.862027,
          lng: -2.667896
        },
        {//32  MADRID - GRAN VIA
          lat: 40.420366,
          lng: -3.70339
        },
        {//33  FUENGIROLA (P.MIRAM)
          lat: 36.539004,
          lng: -4.624353
        },
        {//34  ALBACETE
          lat: 39.242687,
          lng: -1.383002
        },
        {//35  VALENCIA RUZAFA
          lat: 39.466096,
          lng: -0.374601
        },
        {//36  ROQUETAS DE MAR
          lat: 36.77451,
          lng: -2.613295
        },
        {//37  GRAN CAN EL MIRADOR
          lat: 28.034094,
          lng: -15.404998
        },
        {//38  GRAN CAN LAS ARENAS
          lat: 28.124756,
          lng: -15.456928
        },
        {//39  TENERIFE
          lat: 28.456713,
          lng: -16.259165
        },
        {//40  LOGRONO BERCEO
          lat: 42.463102,
          lng: -2.419987
        },
        {//41  MADRID-PLENILUNIO NE
          lat: 40.44769,
          lng: -3.586918
        },
        {//42  MURCIA NEW
          lat: 38.038333,
          lng: -1.148951
        },
        {//43  PALMA DE MALLORCA
          lat: 39.554862,
          lng: 2.707395
        },
        {//44  ALMERIA
          lat: 36.861274,
          lng: -2.433631
        },
        {//45  TARRAGONA
          lat: 41.116914,
          lng: 1.238666
        },
        {//46  GRANADA
          lat: 37.148674,
          lng: -3.613204
        },
        {//47  SEVILLE-TORRE SEVILL
          lat: 37.392101,
          lng: -6.009784
        },
        {//48  SEVILLA - LAGOH
          lat: 37.340852,
          lng: -5.986808
        },
        {//49  BARCA - PL CATALUNYA
          lat: 41.385626,
          lng: 2.170501
        },
        {//50  LISBON - UBBO
          lat: 38.777851,
          lng: -9.218869
        },
        {//51  PORTO - P.NASCENTRE
          lat: 41.174223,
          lng: -8.566457
        },
        {//52  SINTRA - FORUM
          lat: 38.775161,
          lng: -9.338596
        },
        {//53  PORTIMAO - AQUA
          lat: 37.146953,
          lng: -8.54253
        },
        {//54  BRAGA - PARQUE
          lat: 41.557215,
          lng: -8.405764
        },
        {//55  COIMBRA FORUM
          lat: 40.212242,
          lng: -8.443739
        },
        {//56  LISBON - COLOMBO
          lat: 38.755191,
          lng: -9.189788
        },
        {//57  PORTO - NORTE SC
          lat: 41.180627,
          lng: -8.655934
        },
        {//58  LOULE
          lat: 37.098801,
          lng: -7.997253
        },
        {//59  ALMADA FORUM
          lat: 38.659138,
          lng: -9.173741
        },
        {
          lat: 27.031,
          lng: -17.297 
        },
        {
          lat: 27.031,
          lng: -17.297 
        }
      ];
      let markers = [];
      let map;

      function initMap() {
        map = new google.maps.Map(document.getElementById("map"), {
          zoom: 5,
          center: {//MUNICH
            lat: 48.1351,
            lng: 11.5820
          }
        });
      }

      function drop() {
        clearMarkers();

        for (let i = 0; i < neighborhoods.length; i++) {
          addMarkerWithTimeout(neighborhoods[i], i * 25);
        }
      }

      function addMarkerWithTimeout(position, timeout) {
        window.setTimeout(() => {
          markers.push(
            new google.maps.Marker({
              position: position,
              map,
              animation: google.maps.Animation.DROP
            })
          );
        }, timeout);
      }

      function clearMarkers() {
        for (let i = 0; i < markers.length; i++) {
          markers[i].setMap(null);
        }

        markers = [];
      }
    </script>
  </head>
  <body>
    <div id="floating-panel">
      <button id="drop" onclick="drop()">Drop Markers</button>
    </div>
    <div id="map"></div>
  </body>
</html>